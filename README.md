# yAndroidzŽÊ^‚ðƒNƒ‰ƒEƒh‚É•Û‘¶‚µ‚æ‚¤I

![‰æ‘œ1](/readme-img/OverView.png)

## ŠT—v

* [ƒjƒtƒeƒBƒNƒ‰ƒEƒhmobile backend](https://mbaas.nifcloud.com/)‚Ìwƒtƒ@ƒCƒ‹ƒXƒgƒA‹@”\x‚ð—˜—p‚µ‚ÄAuŽB‚Á‚½ŽÊ^‚ðƒNƒ‰ƒEƒh‚É•Û‘¶‚·‚év“à—e‚ðŽÀ‘•‚µ‚½ƒTƒ“ƒvƒ‹ƒvƒƒWƒFƒNƒg‚Å‚·
* ŠÈ’P‚È‘€ì‚Å‚·‚®‚É [ƒjƒtƒeƒBƒNƒ‰ƒEƒhmobile backend](https://mbaas.nifcloud.com/)‚Ì‹@”\‚ð‘ÌŒ±‚¢‚½‚¾‚¯‚Ü‚·

## ƒjƒtƒeƒBƒNƒ‰ƒEƒhmobile backend‚Á‚Ä‰½HH
ƒXƒ}[ƒgƒtƒHƒ“ƒAƒvƒŠ‚ÌƒoƒbƒNƒGƒ“ƒh‹@”\iƒvƒbƒVƒ…’Ê’mEƒf[ƒ^ƒXƒgƒAE‰ïˆõŠÇ—Eƒtƒ@ƒCƒ‹ƒXƒgƒAESNS˜AŒgEˆÊ’uî•ñŒŸõEƒXƒNƒŠƒvƒgj‚ª**ŠJ”­•s—v**A‚µ‚©‚àŠî–{**–³—¿**(’1)‚ÅŽg‚¦‚éƒNƒ‰ƒEƒhƒT[ƒrƒXI¡‰ñ‚Íƒf[ƒ^ƒXƒgƒA‚ð‘ÌŒ±‚µ‚Ü‚·

’1FÚ‚µ‚­‚Í[‚±‚¿‚ç](https://mbaas.nifcloud.com/price.htm)‚ð‚²——‚­‚¾‚³‚¢

![‰æ‘œ2](/readme-img/SdkTypes.png)

## “®ìŠÂ‹«
* Windows 7 Professional
* Android Studio 1.5
* Android ver 4x,5x
 * ‚±‚ÌƒTƒ“ƒvƒ‹ƒAƒvƒŠ‚ÍA’[––‚ÌƒJƒƒ‰‚ðŽg—p‚·‚é‚½‚ßAŽÀ‹@‚ª•K—v‚Å‚·

¦ã‹L“à—e‚Å“®ìŠm”F‚ð‚µ‚Ä‚¢‚Ü‚·


## Žè‡
### 1. [ƒjƒtƒeƒBƒNƒ‰ƒEƒhmobile backend](https://mbaas.nifcloud.com/)‚Ì‰ïˆõ“o˜^‚ÆƒƒOƒCƒ“¨ƒAƒvƒŠì¬

* ã‹LƒŠƒ“ƒN‚©‚ç‰ïˆõ“o˜^i–³—¿j‚ð‚µ‚Ü‚·“o˜^‚ª‚Å‚«‚½‚çƒƒOƒCƒ“‚ð‚·‚é‚Æ‰º}‚Ì‚æ‚¤‚ÉuƒAƒvƒŠ‚ÌV‹Kì¬v‰æ–Ê‚ªo‚é‚Ì‚ÅƒAƒvƒŠ‚ðì¬‚µ‚Ü‚·

![‰æ‘œ3](/readme-img/mBassNewProject.png)

* ƒAƒvƒŠì¬‚³‚ê‚é‚Æ‰º}‚Ì‚æ‚¤‚È‰æ–Ê‚É‚È‚è‚Ü‚·
* ‚±‚Ì‚QŽí—Þ‚ÌAPIƒL[iƒAƒvƒŠƒP[ƒVƒ‡ƒ“ƒL[‚ÆƒNƒ‰ƒCƒAƒ“ƒgƒL[j‚Íæ‚Ù‚ÇƒCƒ“ƒ|[ƒg‚µ‚½AndroidStudio‚Åì¬‚·‚éAndroidƒAƒvƒŠ‚ÉƒjƒtƒeƒBƒNƒ‰ƒEƒhmobile backend‚Ì•R•t‚¯‚é‚½‚ßA‚ ‚Æ‚ÅŽg‚¢‚Ü‚·

![‰æ‘œ4](/readme-img/mBassAPIkey.png)

* “®ìŠm”FŒã‚ÉŽÊ^i‰æ‘œj‚ª•Û‘¶‚³‚ê‚éêŠ‚àŠm”F‚µ‚Ä‚¨‚«‚Ü‚µ‚å‚¤

![‰æ‘œ5](/readme-img/mBassData.png)

### 2. [GitHub](https://github.com/ncmbadmin/android_camera_demo.git)‚©‚çƒTƒ“ƒvƒ‹ƒvƒƒWƒFƒNƒg‚Ìƒ_ƒEƒ“ƒ[ƒh

* ƒvƒƒWƒFƒNƒg‚Ì[Githubƒy[ƒW](https://github.com/ncmbadmin/android_camera_demo.git)‚©‚çuClone or downloadv„uDownload ZIPv‚ðƒNƒŠƒbƒN‚µ‚Ü‚·
* ƒvƒƒWƒFƒNƒg‚ð‰ð“€‚µ‚Ü‚·

### 3. AndroidStudio‚ÅƒAƒvƒŠ‚ð‹N“®

* AndroidStudio‚ðŠJ‚«A‰ð“€‚µ‚½ƒvƒƒWƒFƒNƒg‚ð‘I‘ð‚µ‚Ü‚·

![‰æ‘œ6](/readme-img/SelectProject.png)

* ƒvƒƒWƒFƒNƒg‚ðŠJ‚«‚Ü‚·

![‰æ‘œ7](/readme-img/ProjectDesign.png)

### 4. APIƒL[‚ÌÝ’è

* AndroidStudio‚ÅMainActivity.java‚É‚ ‚éAPIƒL[iƒAƒvƒŠƒP[ƒVƒ‡ƒ“ƒL[‚ÆƒNƒ‰ƒCƒAƒ“ƒgƒL[j‚ÌÝ’è‚ð‚µ‚Ü‚·

![‰æ‘œ8](/readme-img/AndroidAPIkey.png)

* ‚»‚ê‚¼‚ê`YOUR_APP_KEY`‚Æ`YOUR_CLIENT_KEY`‚Ì•”•ª‚ð‘‚«Š·‚¦‚Ü‚·
 * ‚±‚Ì‚Æ‚«Aƒ_ƒuƒ‹ƒNƒH[ƒe[ƒVƒ‡ƒ“i`"`j‚ðÁ‚³‚È‚¢‚æ‚¤‚É’ˆÓ‚µ‚Ä‚­‚¾‚³‚¢I

* AndroidStudio‚©‚çƒrƒ‹ƒh‚·‚éB
    * uƒvƒƒWƒFƒNƒgêŠv\app\build\outputs\apk\ ***.apk ƒtƒ@ƒCƒ‹‚ª¶¬‚³‚ê‚é

### 5. “®ìŠm”F

* ƒAƒvƒŠ‚ª‹N“®‚µ‚½‚çA‡@uCAMERAvƒ{ƒ^ƒ“‚ðƒ^ƒbƒv‚µ‚ÄAŽÊ^‚ðŽB‰e‚µ‚Ü‚·
* ŽŸ‚ÉA‡Au•Û‘¶vƒ{ƒ^ƒ“‚ðƒ^ƒbƒv‚µ‚ÄA•Û‘¶‚µ‚Ü‚·(¡‰ñ‚Íƒtƒ@ƒCƒ‹–¼ŒÅ’èF`test.png`)
* •Û‘¶‚³‚ê‚½‰æ‘œ‚ª‹N“®‰æ–Ê‚É•\Ž¦‚³‚ê‚Ü‚·

![‰æ‘œ9](/readme-img/AndroidCamera.png)

-----

* •Û‘¶‚É¬Œ÷‚µ‚½‚çA[ƒjƒtƒeƒBƒNƒ‰ƒEƒhmobile backend](https://mbaas.nifcloud.com/)‚Ìƒ_ƒbƒVƒ…ƒ{[ƒh‚©‚çuƒtƒ@ƒCƒ‹ƒXƒgƒAv‚ðŠm”F‚µ‚Ä‚Ý‚Ü‚µ‚å‚¤I

![‰æ‘œ10](/readme-img/mBassFileStore.png)

* ŠÈ’P‚ÉŽÊ^‚ªƒNƒ‰ƒEƒh‚É•Û‘¶‚Å‚«‚Ü‚µ‚½™š

## ‰ðà
ƒTƒ“ƒvƒ‹ƒvƒƒWƒFƒNƒg‚ÉŽÀ‘•Ï‚Ý‚Ì“à—e‚Ì‚²Ð‰î

#### SDK‚ÌƒCƒ“ƒ|[ƒg‚Æ‰ŠúÝ’è
* ƒjƒtƒeƒBƒNƒ‰ƒEƒhmobile backend ‚Ì[ƒhƒLƒ…ƒƒ“ƒgiƒNƒCƒbƒNƒXƒ^[ƒgj](https://mbaas.nifcloud.com/doc/current/introduction/quickstart_android.html#/Android/)‚ð‚²—pˆÓ‚µ‚Ä‚¢‚Ü‚·‚Ì‚ÅA‚²Šˆ—p‚­‚¾‚³‚¢

#### ƒƒWƒbƒN
 * `activity_main.xml`‚ÅƒfƒUƒCƒ“‚ðì¬‚µA`MainActivity.java`‚ÉƒƒWƒbƒN‚ð‘‚¢‚Ä‚¢‚Ü‚·
 * ŽÊ^‚ðƒNƒ‰ƒEƒh‚É•Û‘¶‚·‚éˆ—‚ÍˆÈ‰º‚Ì‚æ‚¤‚É‹Lq‚³‚ê‚Ü‚·

‚Pjƒtƒ@ƒCƒ‹ƒXƒgƒA‚Ö‚ÌƒAƒbƒvƒ[ƒh

* mBaaS‚ÌAndroid SDK‚ª’ñ‹Ÿ‚·‚éAƒtƒ@ƒCƒ‹ƒXƒgƒA‹@”\‚ð—˜—p‚·‚éê‡‚ÍNCMBFile‚ðŽg—p‚µ‚Ü‚·
* ƒtƒ@ƒCƒ‹ƒXƒgƒA‚Ö‚ÌƒAƒbƒvƒ[ƒh‚·‚é‚É‚ÍA‚±‚ÌƒNƒ‰ƒX‚ª’ñ‹Ÿ‚·‚ésaveInBackgroundƒƒ\ƒbƒh‚ð—˜—p‚µ‚Ü‚·
* saveInBackground()‚ðŽÀŽ{‚·‚é‚±‚Æ‚ÅA”ñ“¯Šú‚É•Û‘¶‚ªs‚í‚ê‚Ü‚·”ñ“¯ŠúŽÀŽ{‚·‚é‚½‚ßADoneCallBack()‚ðŽg‚Á‚ÄA¬Œ÷EŽ¸”sˆ—‚ðŽw’è‚µ‚Ü‚·
 - ƒtƒ@ƒCƒ‹•Û‘¶‚É¬Œ÷‚µ‚½ê‡‚ÍAƒtƒ@ƒCƒ‹‚ÌŽæ“¾‚ðs‚¢‚Ü‚·(¡‰ñ•Û‘¶‚µ‚½ƒtƒ@ƒCƒ‹–¼F`test.png`)
 - ƒtƒ@ƒCƒ‹•Û‘¶‚ÉŽ¸”s‚µ‚½ê‡AƒAƒ‰[ƒg‚Å•Û‘¶Ž¸”s‚ð•\Ž¦‚µ‚Ü‚·
* ƒtƒ@ƒCƒ‹–¼‚ðŒÅ’è‚µ‚Ä‚¢‚é‚½‚ßAV‚µ‚­ƒtƒ@ƒCƒ‹i‰æ‘œj‚ð•Û‘¶‚·‚é‚Æã‘‚«‚³‚ê‚Ü‚·

‚QjƒAƒbƒvƒ[ƒh‚µ‚½ƒtƒ@ƒCƒ‹‚ðŽæ“¾

* ƒtƒ@ƒCƒ‹ƒXƒgƒA‚É•Û‘¶‚µ‚½‚à‚Ì‚ðŽæ“¾‚·‚é‚É‚ÍAfetchƒƒ\ƒbƒh‚ð—˜—p‚µ‚Ü‚·
* fetchInBackgroundƒƒ\ƒbƒh‚Å‚Ì”ñ“¯Šúˆ—‚à‰Â”\‚Å‚·(¡‰ñ—˜—p)
 - ƒtƒ@ƒCƒ‹‚ÌŽæ“¾Žž‚É‚ÍAƒtƒ@ƒCƒ‹–¼‚ðæ‚ÉŽæ“¾‚·‚é•K—v‚ª‚ ‚è‚Ü‚·(¡‰ñ•Û‘¶‚µ‚½ƒtƒ@ƒCƒ‹–¼F`test.png`)
 - ƒtƒ@ƒCƒ‹Žæ“¾‚É¬Œ÷‚µ‚½ê‡‚ÍAƒtƒ@ƒCƒ‹Žæ“¾E•\Ž¦‚µ‚Ü‚·
 - ƒtƒ@ƒCƒ‹Žæ“¾‚ÉŽ¸”s‚µ‚½ê‡AƒAƒ‰[ƒg‚ÅŽ¸”s‚ð•\Ž¦‚µ‚Ü‚·
 
```java

 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        if (data == null || data.getExtras() == null) {
            return;
        } else {
            Bitmap bp = (Bitmap) data.getExtras().get("data");
            //******* NCMB file upload *******
            ByteArrayOutputStream byteArrayStream = new ByteArrayOutputStream();
            bp.compress(Bitmap.CompressFormat.PNG, 0, byteArrayStream);
            byte[] dataByte = byteArrayStream.toByteArray();

            //ACL 読み込み:可 , 書き込み:可
            NCMBAcl acl = new NCMBAcl();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);

            //通信実施
            final NCMBFile file;
            try {
                file = new NCMBFile("test.png", dataByte, acl);
                file.saveInBackground(new DoneCallback() {
                    @Override
                    public void done(NCMBException e) {
                        String result;
                        if (e != null) {
                            //保存失敗
                            new AlertDialog.Builder(MainActivity.this)
                                    .setTitle("Notification from Nifty")
                                    .setMessage("Error:" + e.getMessage())
                                    .setPositiveButton("OK", null)
                                    .show();
                        } else {
                            //******* NCMB file download *******
                            NCMBFile file = null;
                            try {
                                file = new NCMBFile("test.png");
                                file.fetchInBackground(new FetchFileCallback() {
                                    @Override
                                    public void done(byte[] dataFetch, NCMBException er) {
                                        if (er != null) {
                                            //失敗処理
                                            new AlertDialog.Builder(MainActivity.this)
                                                    .setTitle("Notification from Nifty")
                                                    .setMessage("Error:" + er.getMessage())
                                                    .setPositiveButton("OK", null)
                                                    .show();
                                        } else {
                                            //成功処理
                                            Bitmap bMap = BitmapFactory.decodeByteArray(dataFetch, 0, dataFetch.length);
                                            iv.setImageBitmap(bMap);
                                        }
                                    }
                                });
                            } catch (NCMBException e1) {
                                e1.printStackTrace();
                            }
                        }
                    }
                });
            } catch (NCMBException e) {
                e.printStackTrace();
            }

        }

    }
```

## ŽQl
* ƒjƒtƒeƒBƒNƒ‰ƒEƒhmobile backend ‚Ì[ƒhƒLƒ…ƒƒ“ƒgiƒtƒ@ƒCƒ‹ƒXƒgƒAiAndroidjj](https://mbaas.nifcloud.com/doc/current/filestore/basic_usage_android.html)‚ð‚²—pˆÓ‚µ‚Ä‚¢‚Ü‚·‚Ì‚ÅA‚²Šˆ—p‚­‚¾‚³‚¢

